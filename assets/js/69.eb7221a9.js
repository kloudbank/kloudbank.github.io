(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{777:function(t,v,e){"use strict";e.r(v);var r=e(15),s=Object(r.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("API Design To-Do Preview")]),t._v(" "),e("h2",{attrs:{id:"task-runner"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task-runner"}},[t._v("#")]),t._v(" Task Runner")]),t._v(" "),e("p",[t._v("DWP Task 유형 분류 및 Task Runner List-up")]),t._v(" "),e("h3",{attrs:{id:"dwp-task-유형"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dwp-task-유형"}},[t._v("#")]),t._v(" DWP Task 유형")]),t._v(" "),e("p",[t._v("NoSQL (mongoDB / Redis), RDB (Oracle, MSSQL), Event 관리는 우선 제외,,,")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Detail")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("DevOps")])]),t._v(" "),e("td",[t._v("Build")]),t._v(" "),e("td",[e("strong",[t._v("CI")])]),t._v(" "),e("td",[t._v("git checkout, build (app. / container) image push")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("DevOps")])]),t._v(" "),e("td",[t._v("Deploy")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: namespace 관련 objects, deployment/service/ingress/hpa")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("DevOps")])]),t._v(" "),e("td",[t._v("Resource")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: deployment/service/ingress/hpa")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Data Science")])]),t._v(" "),e("td",[t._v("Deploy")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: helm v3 release")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Data Science")])]),t._v(" "),e("td",[t._v("Resource")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: helm v3 chart upgrade")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Job")])]),t._v(" "),e("td",[t._v("Deploy")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: job, cronjob")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Job")])]),t._v(" "),e("td",[t._v("Resource")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: job, cronjob")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Job")])]),t._v(" "),e("td",[t._v("Schedule")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: cronjob")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Storage")])]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[e("strong",[t._v("CD")])]),t._v(" "),e("td",[t._v("k8s: persistentvolumeclaim")])])])]),t._v(" "),e("h3",{attrs:{id:"task-runner-list-up"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task-runner-list-up"}},[t._v("#")]),t._v(" Task Runner List-up")]),t._v(" "),e("ul",[e("li",[t._v("Task Runner 는 "),e("strong",[t._v("Argo WorkflowTemplate")]),t._v(" 로 정의")]),t._v(" "),e("li",[t._v("CD 를 위한 k8s manifest 는 git repository 에서 관리하며, "),e("strong",[t._v("ArgoCD Application")]),t._v(" 으로 정의하여 k8s cluster 와 sync")]),t._v(" "),e("li",[e("em",[e("u",[t._v("SRE Component 관리를 위한 Task Runner 필요 시 정의")])])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Argo Type")]),t._v(" "),e("th",[t._v("k8s Object")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("Project CD")])]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("Namespace, ServiceAccount, RoleBinding, Secret")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("App Service CI")])]),t._v(" "),e("td",[t._v("Workflow")]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[t._v("App service 의 application, container build 및 image push process")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("App Service CD")])]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("Deployment, Service, Ingress, HPA")]),t._v(" "),e("td",[t._v("1. App Service 배포 "),e("br"),t._v("2. App Service 자원 할당")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Helm CD")])]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("helm manifest, values")]),t._v(" "),e("td",[t._v("1. Helm chart 배포 "),e("br"),t._v("2. Helm resource 자원 할당, chart upgrade")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Job CD")])]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("Job")]),t._v(" "),e("td",[t._v("Job (Normal) 생성, 자원 할당")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("CronJob CD")])]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("CronJob")]),t._v(" "),e("td",[t._v("Job (Scheduled) 생성, 자원 할당 및 CronJob Schedule 변경")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Volume CD")])]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("PersistentVolumeClaim")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Application 관리")])]),t._v(" "),e("td",[t._v("Workflow")]),t._v(" "),e("td",[t._v("Application")]),t._v(" "),e("td",[t._v("Argo Application 기반으로 생성된 resource 삭제")])])])]),t._v(" "),e("h2",{attrs:{id:"server-sent-event"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#server-sent-event"}},[t._v("#")]),t._v(" Server-Sent-Event")]),t._v(" "),e("p",[t._v("DWP 기능 별 SRE 연계 현황 및 Server-sent-event 신규 항목 list-up")]),t._v(" "),e("h3",{attrs:{id:"sse-request-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sse-request-flow"}},[t._v("#")]),t._v(" SSE Request Flow")]),t._v(" "),e("ul",[e("li",[t._v("Router API"),e("br"),t._v("\n: IC Cluster 에 배포되며, SSE Service 를 호출하는 용도 (Monitoring Service, Summary Service)")]),t._v(" "),e("li",[t._v("SSE API"),e("br"),t._v("\n: CQ Cluster 에 배포되며, k8s, argo 의 stream 을 SSE 로 return 하는 API")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("  +----------------------+     +------------------------+     +----------------------------+\n  |                      |     | Python FastAPI         |     | Python FastAPI             |\n  | 1. curl call         |     |                        |     |                            |\n    2. EventSource       |     |  SSEClient             |     | K8SClient (Python Lib)     |\n  | : GET / POST         |     |  (from sseclient)      |     | ArgoClient (REST API)      |\n  |                      +----\x3e|                        +----\x3e|                            |\n  |                      |     |  : return              |     | : return                   |\n  |                      |     |    EventSourceResponse |     |   EventSourceResponse      |\n  +----------------------+     +--------------------+---+     +----------------+-----------+\n                                    # Router API #                     # SSE API #\n                                                                              |\n                                                                              |\n                                                                              |\n  +-------------------------------------------------------+                   |\n  |  * Target K8S Cluster *                               |                   |\n  |                                                       |                   |\n  |  +-------------------+      +------------------+      |                   |\n  |  |                   |      |                  |      |                   |\n  |  | Argo API          |      |   App. Pod       |      |<------------------+\n  |  | : ArgoCd, ArgoWF  |      |   : Log /Event   |      |\n  |  +-------------------+      +--------------^---+      |\n  |                                                       |\n  |                                                       |\n  +-----------------------^-------------------------------+\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br")])]),e("h3",{attrs:{id:"app-service-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-service-list"}},[t._v("#")]),t._v(" App Service List")]),t._v(" "),e("p",[t._v("전체 List 에서, status 정보만 가져오는 경우는, monitoring api 를 각각 호출해서 가져올 수 없을 것으로 보임."),e("br"),t._v("\n현재처럼 redis summary 방식 유지 필요 "),e("em",[e("u",[t._v("(or 신규 개발,,?)")])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Detail")]),t._v(" "),e("th",[t._v("Target Service")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("CI/CD Status")])]),t._v(" "),e("td",[t._v("Redis, CI/CD Last Status")]),t._v(" "),e("td",[e("strong",[t._v("Summary Service")])])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Run Status")])]),t._v(" "),e("td",[t._v("Redis, Pod Status")]),t._v(" "),e("td",[e("strong",[t._v("Summary Service")])])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("배포 시작/취소")])]),t._v(" "),e("td",[t._v("Jenkins")]),t._v(" "),e("td",[e("strong",[t._v("Task Service")])])])])]),t._v(" "),e("h3",{attrs:{id:"app-service-detail"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-service-detail"}},[t._v("#")]),t._v(" App Service Detail")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Detail")]),t._v(" "),e("th",[t._v("Target Service")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("Pipeline History")])]),t._v(" "),e("td",[t._v("Jeknins History")]),t._v(" "),e("td",[e("strong",[t._v("Task Service")])])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pipeline Log")])]),t._v(" "),e("td",[t._v("Jeknins Log")]),t._v(" "),e("td",[e("strong",[t._v("Monitoring Service")])])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Metric")])]),t._v(" "),e("td",[t._v("Redis + Prometheus")]),t._v(" "),e("td",[e("strong",[t._v("Monitoring Service")])])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod Log")])]),t._v(" "),e("td",[t._v("Elastic Search")]),t._v(" "),e("td",[e("strong",[t._v("Monitoring Service")])])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("App. Log")])]),t._v(" "),e("td",[t._v("Elastic Search")]),t._v(" "),e("td",[t._v("유지")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Job Instances")])]),t._v(" "),e("td",[t._v("DB")]),t._v(" "),e("td",[t._v("유지")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Job Log")])]),t._v(" "),e("td",[t._v("Elastic Search")]),t._v(" "),e("td",[t._v("유지")])])])]),t._v(" "),e("h3",{attrs:{id:"server-sent-event-list-up"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#server-sent-event-list-up"}},[t._v("#")]),t._v(" Server-Sent-Event List-up")]),t._v(" "),e("p",[t._v("Server-Sent-Event 로 전환 가능할 것으로 보이는 항목 예상")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("DWP Menu")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("Pipeline Log")])]),t._v(" "),e("td",[t._v("Argo Workflow")]),t._v(" "),e("td",[t._v("Argo Workflow log stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod List")])]),t._v(" "),e("td",[t._v("k8s")]),t._v(" "),e("td",[t._v("k8s pod list watch stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Metric")])]),t._v(" "),e("td",[t._v("k8s")]),t._v(" "),e("td",[t._v("k8s pod status & metric stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod Log")])]),t._v(" "),e("td",[t._v("k8s")]),t._v(" "),e("td",[t._v("k8s pod log stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod Event (New)")])]),t._v(" "),e("td",[t._v("k8s")]),t._v(" "),e("td",[t._v("k8s event watch stream, 추후 필요시 활용")])])])]),t._v(" "),e("h2",{attrs:{id:"service-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#service-api"}},[t._v("#")]),t._v(" Service + API")]),t._v(" "),e("p",[t._v("Task / Monitoring / Summary Service 정의")]),t._v(" "),e("h3",{attrs:{id:"task-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task-service"}},[t._v("#")]),t._v(" Task Service")]),t._v(" "),e("p",[t._v("Argo Workflow 관리, CD Workflow 수행 및 배포 Pipeline 실행/취소 등")]),t._v(" "),e("img",{attrs:{src:"https://www.plantuml.com/plantuml/svg/NL51QiCm4Bph5OjFRGzvG4yn3eL03oujvD0K8qkoeqRPTLQRcbBwzyfo4a85GjgP7MPMMaRHBAT3K2guJa08sFSx0UlP6V64IfL6YE6PZ0vg0ZNsmK6nhWhG4Ro17mLflQysDTJ4eiF7HDXnKB-tWkeb2ypn8dZJSG-lZh-ySLaY2PYfadk23V6-2pHcJYTax6xOQdN5ZSsurQ9R7PDLRgWfIiyk7aDnQRHjYgIGn45B8dG0wh8hF4BzBJj2UD9HodeDMzmYZES4JPnJDdhmSDVn91mSfgenmJkK-xcVdPmOuJCIDibv88nEgVnqi5Wyv3T9Ez_piDbxgixZpSSLINd_8MbKjNHeqvVz0G00",alt:"uml diagram"}}),t._v(" "),e("h4",{attrs:{id:"api-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-list"}},[t._v("#")]),t._v(" API List")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Detail")]),t._v(" "),e("th",[t._v("Usage")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("Workflow 생성")])]),t._v(" "),e("td",[t._v("submit_workflow")]),t._v(" "),e("td",[t._v("Submit Workflow from WorkflowTemplate (CI, CD Process 수행)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Workflow List")])]),t._v(" "),e("td",[t._v("list_workflows")]),t._v(" "),e("td",[t._v("App Service Pipeline History 조회")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Archived Workflow List")])]),t._v(" "),e("td",[t._v("list_archived_workflows")]),t._v(" "),e("td",[t._v("CI, CD Process Log (step별 log)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Workflow 취소")])]),t._v(" "),e("td",[t._v("stop_workflow")]),t._v(" "),e("td",[t._v("App. Service 배포 취소")])]),t._v(" "),e("tr",[e("td",[e("em",[t._v("Workflow 상세")])]),t._v(" "),e("td",[t._v("get_workflow")]),t._v(" "),e("td",[t._v("필요 시,,")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("Task API docs"),e("br"),t._v(" "),e("a",{attrs:{href:"http://hcp-sre-apps-task.hcpic.kubepia.net/docs#/Argo%20Workflow%20API",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://hcp-sre-apps-task.hcpic.kubepia.net/docs#/Argo Workflow API"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"api-reference"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-reference"}},[t._v("#")]),t._v(" API Reference")]),t._v(" "),e("blockquote",[e("p",[t._v("Argo Workflow Python SDK API Docs 참조"),e("br"),t._v(" "),e("a",{attrs:{href:"https://github.com/argoproj/argo-workflows/tree/master/sdks/python/client/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/argoproj/argo-workflows/tree/master/sdks/python/client/docs"),e("OutboundLink")],1)])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("HTTP request")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("submit_workflow")])]),t._v(" "),e("td",[e("strong",[t._v("POST")]),t._v(" /api/v1/workflows/{namespace}/submit")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("list_workflows")])]),t._v(" "),e("td",[e("strong",[t._v("GET")]),t._v(" /api/v1/workflows/{namespace}")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("list_archived_workflows")])]),t._v(" "),e("td",[e("strong",[t._v("GET")]),t._v(" /api/v1/archived-workflows")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("stop_workflow")])]),t._v(" "),e("td",[e("strong",[t._v("PUT")]),t._v(" /api/v1/workflows/{namespace}/{name}/stop")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("get_workflow")])]),t._v(" "),e("td",[e("strong",[t._v("GET")]),t._v(" /api/v1/workflows/{namespace}/{name}")]),t._v(" "),e("td")])])]),t._v(" "),e("h3",{attrs:{id:"monitoring-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#monitoring-service"}},[t._v("#")]),t._v(" Monitoring Service")]),t._v(" "),e("p",[t._v("SSE Service 를 Monitoring 하는 Service")]),t._v(" "),e("img",{attrs:{src:"https://www.plantuml.com/plantuml/svg/RLB1JW8n4BttAoQSr4ICdWmd26928d5r3npKG-dEBfLk1wO3Q8p_RhVB8Z4sQTg-UUzr-j9X4CsohPrI3ai18M1RBGKAosZ4abTgP8GO7iXefnfG-yeXzARZ7kW0ri2NWZXUxkOPPCIYtLjJAFPhzNqg63ybWTbqWXbv6wsjho17tbc3ILYtSCiPSKKm9rwLZlOmogQ9eYEwBrl6wZOSyRXFOA55BtI8boPzHa4gnh1nlKvTBFuZpgoVFXuvjVMMuXkK9q5Oa0ZLG6NN80mW-vGbURZNGM8ByEfVFUJvPEmiUe6pagCW13JfVDxM6MNB7YQx2EMqPOFF6DRaOnE_rLmOTTqLb4hfGxz_aMADC-qFZGpWkW_lUgU3ORkMK-l6ygOFWXzoXGry6PApwjxGs1pIR9SZ4XFwWxHvd2gRlDKGVH5_q0y0",alt:"uml diagram"}}),t._v(" "),e("h4",{attrs:{id:"api-list-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-list-2"}},[t._v("#")]),t._v(" API List")]),t._v(" "),e("blockquote",[e("p",[t._v("Monitoring API docs"),e("br"),t._v(" "),e("a",{attrs:{href:"http://hcp-sre-apps-monitoring.hcpic.kubepia.net/docs#/Argo%20Workflow%20monitoring%20api",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://hcp-sre-apps-monitoring.hcpic.kubepia.net/docs#/Argo Workflow monitoring api"),e("OutboundLink")],1)])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Detail")]),t._v(" "),e("th",[t._v("Usage")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("Workflow Log")])]),t._v(" "),e("td",[t._v("workflow log stream")]),t._v(" "),e("td",[t._v("CI, CD Process Log (Workflow main log)")]),t._v(" "),e("td",[t._v("stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Archived Workflow Log")])]),t._v(" "),e("td",[t._v("archived workflow log file")]),t._v(" "),e("td",[t._v("CI, CD Process Log (step별 log)")]),t._v(" "),e("td",[t._v("plain text")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Workflow Status")])]),t._v(" "),e("td",[t._v("workflow status stream")]),t._v(" "),e("td",[t._v("CI, CD Process Status")]),t._v(" "),e("td",[t._v("stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod List")])]),t._v(" "),e("td",[t._v("k8s pod list watch")]),t._v(" "),e("td",[t._v("App Service detail 의 Pod List 조회")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod Metric")])]),t._v(" "),e("td",[t._v("k8s pod status stream")]),t._v(" "),e("td",[t._v("App Service detail 의 Pod Metric 및 status 조회")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Pod Log")])]),t._v(" "),e("td",[t._v("k8s pod log stream")]),t._v(" "),e("td",[t._v("App Service 의 개별 Pod Log 조회")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("em",[t._v("Pod Event")])]),t._v(" "),e("td",[t._v("k8s event watch")]),t._v(" "),e("td",[t._v("추후 활용,,,")]),t._v(" "),e("td")])])]),t._v(" "),e("h4",{attrs:{id:"api-reference-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-reference-2"}},[t._v("#")]),t._v(" API Reference")]),t._v(" "),e("blockquote",[e("p",[t._v("Argo Workflow Python SDK API Docs 참조"),e("br"),t._v(" "),e("a",{attrs:{href:"https://github.com/argoproj/argo-workflows/tree/master/sdks/python/client/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/argoproj/argo-workflows/tree/master/sdks/python/client/docs"),e("OutboundLink")],1)])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("HTTP request")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("workflow_logs")])]),t._v(" "),e("td",[e("strong",[t._v("GET")]),t._v(" /api/v1/workflows/{namespace}/{name}/log")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("get_output_artifact_by_uid")])]),t._v(" "),e("td",[e("strong",[t._v("GET")]),t._v(" /artifacts-by-uid/{uid}/{podName}/{artifactName}")]),t._v(" "),e("td")])])]),t._v(" "),e("blockquote",[e("p",[t._v("Kubernetes client (Python)"),e("br"),t._v(" "),e("a",{attrs:{href:"https://github.com/kubernetes-client/python/blob/master/kubernetes/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/kubernetes-client/python/blob/master/kubernetes/README.md"),e("OutboundLink")],1)])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("Options")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("list_namespaced_pod")])]),t._v(" "),e("td",[t._v("namespace")]),t._v(" "),e("td",[t._v("App. Service pod list watch stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("read_namespaced_pod_log")])]),t._v(" "),e("td",[t._v("name, namespace")]),t._v(" "),e("td",[t._v("App. Service pod log stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("list_cluster_custom_object")])]),t._v(" "),e("td",[t._v("metrics.k8s.io/v1beta1 api 명시하여 호출")]),t._v(" "),e("td",[t._v("App. Service pod metric watch stream")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("list_namespaced_event")])]),t._v(" "),e("td",[t._v("namespace, involvedObject")]),t._v(" "),e("td",[t._v("App. Service pod event watch stream")])])])]),t._v(" "),e("h3",{attrs:{id:"summary-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#summary-service"}},[t._v("#")]),t._v(" Summary Service")]),t._v(" "),e("p",[t._v("Argo Workflow / K8S 의 event 를 listen 하여, app별 status data summary")]),t._v(" "),e("ul",[e("li",[t._v("sse client 를 연결하는 python module 로 개발하여 container 로 실행")]),t._v(" "),e("li",[e("em",[e("u",[t._v("service 별로 분리할지? 혹은 python multiprocess 활용할지?")])])])]),t._v(" "),e("img",{attrs:{src:"https://www.plantuml.com/plantuml/svg/XL9DIyD04BtlhnXwKf6UYwUMMg588JQ77go7DPcaIvETEZjfAE9_Tp-IeY2ufzat--QzUUpSYMRfsaQf1Yi18M1J7mHAmrY88QjKABIj6uJ9UZa1xS0KyAd0dzV7NGOPiUZcBJJA_XJnKej-ryupjbWQ5qaSgiJAkxRLV84S-MmAZ5INCFNrKs_v4gd5nwYt8Mk4sDZwDzbXwY-u9jWH7wk6UbXawzZM7kshzE8uSrVSrrvFMH8SrgPgD08Fa5taG1OsL7RUpDxkBUJvQjaOj08t5LCRX8julqrzHkdOmkhiePmwBd2BxaJM-uigCUGWuhEv2Znf9zvIcl0yovF2FOHb1hN_XYkVF4odTqFAumv_8o6jO23KGpJZDIIYvcXB_oM-0G00",alt:"uml diagram"}}),t._v(" "),e("h4",{attrs:{id:"service-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#service-list"}},[t._v("#")]),t._v(" Service List")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Detail")]),t._v(" "),e("th",[t._v("Usage")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("CI/CD Last Status")])]),t._v(" "),e("td",[t._v("watch_workflows")]),t._v(" "),e("td",[t._v("Insert into Redis App Service list CI/CD status")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Run Status")])]),t._v(" "),e("td",[t._v("k8s pod status")]),t._v(" "),e("td",[t._v("Insert into Redis App Service list Run status")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("Argo API List")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("HTTP request")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("watch_workflows")])]),t._v(" "),e("td",[e("strong",[t._v("GET")]),t._v(" /api/v1/workflow-events/{namespace}")]),t._v(" "),e("td",[t._v("App Service CI/CD workflow event watch stream")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("K8S API List")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("Options")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("read_namespaced_pod_status")])]),t._v(" "),e("td",[t._v("name, namespace")]),t._v(" "),e("td",[t._v("App Service pod status stream")])])])])])}),[],!1,null,null,null);v.default=s.exports}}]);