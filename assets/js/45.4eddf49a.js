(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{734:function(e,s,a){"use strict";a.r(s);var t=a(15),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("AWS에 생성한 Resource 및 필요한 초기 설정 정리한 내역임")]),e._v(" "),a("h2",{attrs:{id:"aws-configure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-configure"}},[e._v("#")]),e._v(" AWS Configure")]),e._v(" "),a("p",[e._v("AWS 및 EKS 개발 환경 설정.")]),e._v(" "),a("h3",{attrs:{id:"prerequisite"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisite"}},[e._v("#")]),e._v(" Prerequisite")]),e._v(" "),a("ul",[a("li",[e._v("aws-cli 설치")]),e._v(" "),a("li",[e._v("AWS Access Key 생성")]),e._v(" "),a("li",[e._v("기본 Region은 Seoul (ap-northeast-2)")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("aws configure --profile <username>\nAWS Access Key ID [None]: <user key id>\nAWS Secret Access Key [None]: <user access key>\nDefault region name [None]: ap-northeast-2\nDefault output format [None]: json\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h2",{attrs:{id:"create-kubeconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-kubeconfig"}},[e._v("#")]),e._v(" Create kubeconfig")]),e._v(" "),a("ul",[a("li",[e._v("kubeconfig 생성 후, kube-system aws-auth configmap에 mapUser 추가 필요")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("aws eks update-kubeconfig \\\n  --region ap-northeast-2 \\\n  --name <cluster name> \\\n  --profile <username>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h2",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),a("h3",{attrs:{id:"docker-image-cache-관리"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-cache-관리"}},[e._v("#")]),e._v(" Docker Image Cache 관리")]),e._v(" "),a("ul",[a("li",[e._v("지정된 디스크 사용량 비율로 Image Cache 정리하도록 구성하는 Guide"),a("br"),e._v(" "),a("a",{attrs:{href:"https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-worker-nodes-image-cache/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-worker-nodes-image-cache/"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"docker-gc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-gc"}},[e._v("#")]),e._v(" Docker GC")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run --rm --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /etc:/etc:ro spotify/docker-gc\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://github.com/spotify/docker-gc",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/spotify/docker-gc"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"evicted-pod-삭제"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#evicted-pod-삭제"}},[e._v("#")]),e._v(" Evicted Pod 삭제")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("kubectl get po -A "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" Evicted "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("awk")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{print $1\" \" $2}'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("xargs")]),e._v(" kubectl delete po -n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("namespace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);